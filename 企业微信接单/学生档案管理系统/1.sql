-- 创建数据库
CREATE DATABASE StudentManagement
CHARACTER SET utf8
COLLATE utf8_general_ci;

-- 使用数据库
USE StudentManagement;

-- 1. 创建学院表（最基础的表，没有外键）
CREATE TABLE 学院表 (
    学院编号 INT PRIMARY KEY,
    学院名 VARCHAR(50)
);

-- 2. 创建专业表（引用学院表的学院编号）
CREATE TABLE 专业表 (
    专业名称 VARCHAR(50) PRIMARY KEY,
    学院编号 INT,
    FOREIGN KEY (学院编号) REFERENCES 学院表(学院编号)
);

-- 3. 创建班级表（引用专业表的专业名称）
CREATE TABLE 班级表 (
    班级编号 INT PRIMARY KEY,
    班级名称 VARCHAR(50),
    人数 INT,
    专业编号 VARCHAR(50),
    FOREIGN KEY (专业编号) REFERENCES 专业表(专业名称)
);

-- 4. 创建课程名表（不依赖于其他表）
CREATE TABLE 课程名表 (
    课程编号 INT PRIMARY KEY,
    课程名 VARCHAR(100),
    课程类别 VARCHAR(50),
    学分 FLOAT
);

-- 5. 创建学生档案表（引用班级表的班级编号）
CREATE TABLE 学生档案表 (
    学号 INT PRIMARY KEY,
    姓名 VARCHAR(50),
    性别 VARCHAR(10) NOT NULL,
    出生日期 DATE,
    政治面貌 VARCHAR(20),
    班级编号 INT,
    毕业学校 VARCHAR(100),
    FOREIGN KEY (班级编号) REFERENCES 班级表(班级编号)
);

-- 6. 创建教师表（引用课程名表的课程编号和班级表的班级编号）
CREATE TABLE 教师表 (
    教师编号 INT PRIMARY KEY,
    课程编号 INT,
    班级编号 INT,
    授课地点 VARCHAR(100),
    职称 VARCHAR(50),
    FOREIGN KEY (课程编号) REFERENCES 课程名表(课程编号),
    FOREIGN KEY (班级编号) REFERENCES 班级表(班级编号)
);

-- 7. 创建学生成绩表（引用学生档案表的学号和课程名表的课程编号）
CREATE TABLE 学生成绩表 (
    学号 INT,
    课程编号 INT,
    成绩 FLOAT,
    考试次数 INT,
    PRIMARY KEY (学号, 课程编号),
    FOREIGN KEY (学号) REFERENCES 学生档案表(学号),
    FOREIGN KEY (课程编号) REFERENCES 课程名表(课程编号)
);

-- 插入学院表数据
INSERT INTO 学院表 (学院编号, 学院名) VALUES
(1, '计算机学院'),
(2, '机械学院'),
(3, '电子信息学院'),
(4, '土木工程学院'),
(5, '经济管理学院'),
(6, '外国语学院'),
(7, '化学与环境工程学院'),
(8, '数学与统计学院'),
(9, '艺术与设计学院'),
(10, '医学院');

-- 插入专业表数据
INSERT INTO 专业表 (专业名称, 学院编号) VALUES
('计算机科学与技术', 1),
('软件工程', 1),
('机械设计制造及其自动化', 2),
('通信工程', 3),
('电子信息工程', 3),
('土木工程', 4),
('工程管理', 4),
('会计学', 5),
('金融学', 5),
('英语', 6);

-- 插入班级表数据
INSERT INTO 班级表 (班级编号, 班级名称, 人数, 专业编号) VALUES
(101, '计算机2001班', 30, '计算机科学与技术'),
(102, '计算机2002班', 28, '计算机科学与技术'),
(103, '软件2001班', 32, '软件工程'),
(201, '机械2001班', 35, '机械设计制造及其自动化'),
(202, '机械2002班', 33, '机械设计制造及其自动化'),
(301, '通信2001班', 25, '通信工程'),
(302, '电子2001班', 27, '电子信息工程'),
(401, '土木2001班', 30, '土木工程'),
(501, '会计2001班', 29, '会计学'),
(601, '英语2001班', 22, '英语');

-- 插入课程名表数据
INSERT INTO 课程名表 (课程编号, 课程名, 课程类别, 学分) VALUES
(1, '高等数学', '必修', 5),
(2, '大学英语', '必修', 4),
(3, '数据结构', '必修', 4),
(4, '操作系统', '必修', 4),
(5, '数据库原理', '选修', 3),
(6, '工程制图', '必修', 3),
(7, '模拟电子技术', '必修', 4),
(8, '土木材料', '选修', 3),
(9, '财务管理', '选修', 3),
(10, '文学导论', '选修', 2);

-- 插入学生档案表数据
INSERT INTO 学生档案表 (学号, 姓名, 性别, 出生日期, 政治面貌, 班级编号, 毕业学校) VALUES
(1001, '张三', '男', '2001-06-15', '团员', 101, '某中学'),
(1002, '李四', '女', '2002-03-22', '团员', 101, '某中学'),
(1003, '王五', '男', '2001-12-10', '团员', 102, '某中学'),
(1004, '赵六', '女', '2001-05-05', '团员', 102, '某中学'),
(1005, '钱七', '男', '2001-07-17', '团员', 103, '某中学'),
(1006, '孙八', '女', '2001-09-30', '群众', 103, '某中学'),
(1007, '周九', '男', '2001-11-02', '团员', 201, '某中学'),
(1008, '吴十', '女', '2002-01-12', '团员', 201, '某中学'),
(1009, '郑十一', '男', '2001-08-14', '群众', 202, '某中学'),
(1010, '王十二', '女', '2002-04-05', '团员', 301, '某中学');

-- 插入教师表数据
INSERT INTO 教师表 (教师编号, 课程编号, 班级编号, 授课地点, 职称) VALUES
(1, 1, 101, '教学楼101', '教授'),
(2, 2, 101, '教学楼102', '副教授'),
(3, 3, 102, '教学楼201', '讲师'),
(4, 4, 102, '教学楼202', '讲师'),
(5, 5, 103, '教学楼301', '副教授'),
(6, 6, 201, '教学楼302', '教授'),
(7, 7, 301, '实验楼101', '讲师'),
(8, 8, 401, '实验楼201', '讲师'),
(9, 9, 501, '教学楼401', '教授'),
(10, 10, 601, '教学楼501', '副教授');

-- 插入学生成绩表数据
INSERT INTO 学生成绩表 (学号, 课程编号, 成绩, 考试次数) VALUES
(1001, 1, 85, 1),
(1002, 2, 90, 1),
(1003, 3, 78, 2),
(1004, 4, 88, 1),
(1005, 5, 92, 1),
(1006, 6, 80, 1),
(1007, 7, 75, 1),
(1008, 8, 89, 2),
(1009, 9, 70, 1),
(1010, 10, 95, 1);
